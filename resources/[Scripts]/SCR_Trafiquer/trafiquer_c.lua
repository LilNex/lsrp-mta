-----------------------------------
---- Los Santos - RolePlay 
---- All rights reserved to Arseni 
------------------------------------

gR = getRootElement()
local jij = getLocalPlayer()

function showintro()
	local car = getPedOccupiedVehicle(jij)
	local x, y, z = getElementPosition(car)	
	local rX, rY, rZ = getElementRotation(car)
	local bin = createObject(1337, x, y + 6, z)
	setVehicleEngineState(car, false)
	setElementData(jij, "bin", bin)
	setElementData(jij, "car", car)
	moveObject(bin, 2000, x, y, z)
	setElementRotation(car, 0, 0, -180)
	setElementAlpha(bin, 0)
	setTimer(destroyElement, 3000, 1, bin)
	setElementCollisionsEnabled(bin, false)
		addEventHandler( 'onClientPreRender', gR, updateCam1 )
		setTimer(triggerEvent, 2000, 1, "guiStuff", jij)
		setTimer(removeDaAnnoyingThingy, 3000, 1);
	end
addEvent("disableBinCol", true)
addEventHandler("disableBinCol", getLocalPlayer(), showintro)

function updateCam1()
  local bin = getElementData(jij, "bin")
  local car = getElementData(jij, "car")
  local cx, cy, cz = getElementPosition( bin )
  local tx, ty, tz = getElementPosition( car )
  local rX, rY, rZ = getElementRotation( car )
  setCameraMatrix ( cx, cy, cz + 0.5, tx + 0.5, ty - 0.6, tz)
end

function removeDaAnnoyingThingy()
removeEventHandler( 'onClientPreRender', gR, updateCam1 )
end

function guiFunc()
addEventHandler("onClientRender", gR, drawWire)
showCursor(true)
--setCameraTarget(jij)

--BUTTONS YELLOW
        yel1 = guiCreateButton(939,510,41,15,"",false)
        yel2 = guiCreateButton(980,505,16,15,"",false)
        yel3 = guiCreateButton(996,498,16,15,"",false)
        yel4 = guiCreateButton(1012,490,16,15,"",false)
        yel5 = guiCreateButton(1028,483,16,15,"",false)
        yel6 = guiCreateButton(1044,483,16,15,"",false)
        yel7 = guiCreateButton(1060,483,16,15,"",false)
        yel8 = guiCreateButton(923,505,16,15,"",false)
        yel9 = guiCreateButton(907,498,16,15,"",false)
        yel10 = guiCreateButton(891,495,16,15,"",false)
        yel11 = guiCreateButton(875,490,16,15,"",false)
        yel12 = guiCreateButton(871,505,16,15,"",false)
        yel13 = guiCreateButton(907,513,16,15,"",false)
        yel14 = guiCreateButton(935,535,11,11,"",false)
        yel15 = guiCreateButton(975,534,11,11,"",false)
        yel16 = guiCreateButton(963,536,11,11,"",false)
        yel17 = guiCreateButton(950,535,11,11,"",false)
		
guiSetAlpha(yel1, 0)
guiSetAlpha(yel2, 0)
guiSetAlpha(yel3, 0)
guiSetAlpha(yel4, 0)
guiSetAlpha(yel5, 0)
guiSetAlpha(yel6, 0)
guiSetAlpha(yel7, 0)
guiSetAlpha(yel8, 0)
guiSetAlpha(yel9, 0)
guiSetAlpha(yel10, 0)
guiSetAlpha(yel11, 0)
guiSetAlpha(yel12, 0)
guiSetAlpha(yel13, 0)
guiSetAlpha(yel14, 0)
guiSetAlpha(yel15, 0)
guiSetAlpha(yel16, 0)
guiSetAlpha(yel17, 0)
guiSetAlpha(yel18, 0)
guiSetAlpha(yel19, 0)

		
--BUTTONS RED
        r1 = guiCreateButton(1067,528,10,9,"",false)
        r2 = guiCreateButton(1057,528,10,9,"",false)
        r3 = guiCreateButton(1036,535,10,9,"",false)
        r4 = guiCreateButton(1046,531,10,9,"",false)
        r5 = guiCreateButton(1024,539,10,9,"",false)
        r6 = guiCreateButton(1014,540,10,9,"",false)
        r7 = guiCreateButton(1004,540,10,9,"",false)
        r8 = guiCreateButton(995,541,10,9,"",false)
        r9 = guiCreateButton(986,542,10,9,"",false)
        r10 = guiCreateButton(977,545,10,9,"",false)
        r11 = guiCreateButton(966,549,10,9,"",false)
        r12 = guiCreateButton(957,550,10,9,"",false)
        r13 = guiCreateButton(947,551,10,9,"",false)
        r14 = guiCreateButton(937,551,10,9,"",false)
        r15 = guiCreateButton(926,548,10,9,"",false)
        r16 = guiCreateButton(917,545,10,9,"",false)
        r17 = guiCreateButton(906,541,10,9,"",false)
        r18 = guiCreateButton(1020,551,10,9,"",false)
        r19 = guiCreateButton(1015,560,10,9,"",false)
		
guiSetAlpha(r1, 0)
guiSetAlpha(r2, 0)
guiSetAlpha(r3, 0)
guiSetAlpha(r4, 0)
guiSetAlpha(r5, 0)
guiSetAlpha(r6, 0)
guiSetAlpha(r7, 0)
guiSetAlpha(r8, 0)
guiSetAlpha(r9, 0)
guiSetAlpha(r10, 0)
guiSetAlpha(r11, 0)
guiSetAlpha(r12, 0)
guiSetAlpha(r13, 0)
guiSetAlpha(r14, 0)
guiSetAlpha(r15, 0)
guiSetAlpha(r16, 0)
guiSetAlpha(r17, 0)
guiSetAlpha(r18, 0)
guiSetAlpha(r19, 0)

end
addEvent ( "guiStuff", true )
addEventHandler ( "guiStuff", jij, guiFunc) 

function drawWire()
dxDrawImage(873.0,464.0,279.0,176.0,"hotwire.png",0.0,0.0,0.0,tocolor(255,255,255,255),false)
dxDrawText("Click on one of the wires to attempt to start the engine (Yellow or Red)",860.0,445.0,1166.0,461.0,tocolor(255,255,255,255),1.0,"default-bold","left","top",false,false,false)
end

function closeYel()
local car = getPedOccupiedVehicle(jij)
if source == yel1 or source == yel2 or source == yel3 or source == yel4 or source == yel5 or source == yel6 or source == yel7 or source == yel8 or source == yel9 or source == yel10 or source == yel11 or source == yel12 or source == yel13 or source == yel14 or source == yel15 or source == yel16 or source == yel17 or source == r1 or source == r2 or source == r3 or source == r4 or source == r5 or source == r6 or source == r7 or source == r8 or source == r9 or source == r10 or source == r11 or source == r12 or source == r13 or source == r14 or source == r15 or source == r16 or source == r17 or source == r18 or source == r19 then
removeEventHandler("onClientRender", gR, drawWire)

outputChatBox("Attempting to start the engine...", 0, 255, 0, false)
setTimer(engineY, 5000, 1)

guiSetVisible(r1, false)
guiSetVisible(r2, false)
guiSetVisible(r3, false)
guiSetVisible(r4, false)
guiSetVisible(r5, false)
guiSetVisible(r6, false)
guiSetVisible(r7, false)
guiSetVisible(r8, false)
guiSetVisible(r9, false)
guiSetVisible(r10, false)
guiSetVisible(r11, false)
guiSetVisible(r12, false)
guiSetVisible(r13, false)
guiSetVisible(r14, false)
guiSetVisible(r15, false)
guiSetVisible(r16, false)
guiSetVisible(r17, false)
guiSetVisible(r18, false)
guiSetVisible(r19, false)

guiSetVisible(yel1, false)
guiSetVisible(yel2, false)
guiSetVisible(yel3, false)
guiSetVisible(yel4, false)
guiSetVisible(yel5, false)
guiSetVisible(yel6, false)
guiSetVisible(yel7, false)
guiSetVisible(yel8, false)
guiSetVisible(yel9, false)
guiSetVisible(yel10, false)
guiSetVisible(yel11, false)
guiSetVisible(yel12, false)
guiSetVisible(yel13, false)
guiSetVisible(yel14, false)
guiSetVisible(yel15, false)
guiSetVisible(yel16, false)
guiSetVisible(yel17, false)

showCursor(false)
triggerServerEvent("setCamBack", getLocalPlayer())
	end
end
addEventHandler("onClientGUIClick", root, closeYel)

function engineY()
local car = getPedOccupiedVehicle(jij)
setVehicleEngineState(car, true)
setTimer(setVehicleEngineState, math.random(1000, 2000), 1, car, false)
setTimer(setVehicleEngineState, math.random(5000, 8000), 1, car, true)
setTimer(setVehicleEngineState, 9000, 1, car, false)
setTimer(setVehicleEngineState, 9200, 1, car, true)
setTimer(setVehicleEngineState, 9400, 1, car, false)
setTimer(setVehicleEngineState, 9600, 1, car, true)
	end